!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/public/",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);var n=class{constructor(e,t,i){window.utterances=[],this.lang=e,this.volume=t,this.speed=i,this.voices=window.speechSynthesis.getVoices(),this.voicesLoaded=!1,window.speechSynthesis.onvoiceschanged=(()=>{this.voices=window.speechSynthesis.getVoices();let e=0;this.voices.forEach((t,i)=>{t.lang===this.lang&&(e=i)}),this.utterance=new window.SpeechSynthesisUtterance,this.utterance.voice=this.voices[e],this.utterance.voiceURI="native",this.utterance.volume=this.volume,this.utterance.lang=this.lang,this.utterance.rate=this.speed,this.voices.length>0&&!this.voicesLoaded&&(this.voicesLoaded=!0)})}say(e){return new Promise((t,i)=>{e&&e.trim()?(window.speechSynthesis.cancel(),this.utterance.text=e,window.utterances.push(this.utterance),this.utterance.onend=(()=>{t()}),window.speechSynthesis.speak(this.utterance)):t()})}static isSupported(){return"speechSynthesis"in window}};class s{constructor(e,t){const i="#JSGF V1.0; grammar phrases; public <phrases> = "+t.join(" | ")+";";this.recognition=new(s._instance());const n=new(s._grammar());n.addFromString(i,1),this.recognition.grammars=n,this.recognition.continuous=!0,this.recognition.interimResults=!1,this.recognition.maxAlternatives=1,this.recognition.lang=e,this.isStarted=!1,this.speechCallbacks=[],this.recognition.onstart=(()=>{this.isStarted=!0,console.log("DEBUG: Recognition start...")}),this.recognition.onend=(()=>{this.isStarted=!1,console.log("DEBUG: Recognition end!"),this.isPaused||this.recognition.start()}),this.recognition.onresult=(e=>{let t=e.results[e.resultIndex][0];this.speechCallbacks.forEach(e=>e({text:t.transcript.trim().toLowerCase(),confidence:t.confidence}))}),this.recognition.start()}listen(e){this.speechCallbacks.push(e)}pause(){this.isPaused=!0,this.recognition.stop()}resume(){this.isPaused=!1,this.isStarted||this.recognition.start()}static isSupported(){return Boolean(s._instance())&&Boolean(s._grammar())}static _instance(){return window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition}static _grammar(){return window.SpeechGrammarList||window.webkitSpeechGrammarList}}var o=s;var r=class{static isSupported(){return n.isSupported()&&o.isSupported()}constructor(e){this._mainCommand=e.mainCommand.toLowerCase().trim(),this._voiceSynthesizer=new n(e.lang,e.volume,e.speed),this._voiceRecognizer=new o(e.lang,e.grammar),this.callbackListeners=[],this.isRecognizerListening=!1}listen(e,t){this.callbackListeners.push({callback:t,actions:e.map(e=>e.trim().toLowerCase().replace(/[^a-zA-Z\s]/g,""))}),this.isRecognizerListening||(this.isRecognizerListening=!0,this._voiceRecognizer.listen(e=>{const t=e.text.toLowerCase().trim(),i=t===this._mainCommand;if(console.log(t),!i)for(let e=0;e<this.callbackListeners.length;e++){let i=!1;const n=this.callbackListeners[e];for(let e=0;e<n.actions.length;e++){const s=n.actions[e];if(t.includes(s)){n.callback(),i=!0;break}}if(i)break}}))}say(e,t=(()=>{})){this._voiceRecognizer.pause(),this._voiceSynthesizer.say(e).then(()=>{this._voiceRecognizer.resume(),"function"==typeof t&&setTimeout(t,200)})}};window.VoiceAssistant=r}]);